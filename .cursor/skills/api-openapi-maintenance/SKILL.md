---
name: api-openapi-maintenance
description: 既存OpenAPIの検査結果をもとに、最小変更で修正・再検査するスキル。既存仕様の確認、整合修正、破壊的変更の回避を進めたいときに使う。
---

# OpenAPIメンテナンス（既存仕様の確認・修正）

## 目的
- 既存OpenAPIの不整合やlint指摘を最小変更で修正する
- 破壊的変更を避け、運用に影響しない範囲で改善する

## 使うとき
- 既存のOpenAPI YAMLを見直したいとき
- 生成済みの仕様を検査して修正したいとき

## 入力
- 既存のOpenAPIファイル（.yaml/.json）
- 検査結果（lint/構文検証/差分）
- 既存ルール（命名/エラー/認証/分類）があればそれ

## 進め方
1) 検査結果を分類する（構文/参照/命名/例/型/運用）
2) 破壊的変更になり得る修正は必ず分離して扱う
3) 最小変更で修正する（不要な追加・再設計はしない）
4) 再検査して問題が解消したか確認する
5) TODO と未確定事項を残す（勝手に決めない）

## 検査コマンド例（環境にある場合のみ）
- 構文/参照整合: `redocly lint <openapi.yaml>`
- ルール/命名/例: `spectral lint <openapi.yaml>`
- 破壊的変更: `oasdiff --fail-on ERRORS <old.yaml> <new.yaml>`
- モック起動: `prism mock <openapi.yaml>`（UI/フロント検証用）

## 進行メモ（貼るべき情報）
- 使ったコマンド
- エラー/警告の抜粋
- 修正の方針（最小変更 or 要設計判断）

## 修正の優先順位（推奨）
1) 構文・参照整合の破綻
2) examplesの欠落・不一致
3) 型の揺れ（ID/日時/カーソルなど）
4) 命名の揺れ
5) ドキュメントの説明不足

## 出力
- 修正済みOpenAPI
- 修正内容の短い要約（何を直したか）
- 破壊的変更の懸念点（あれば）
- TODO一覧

## 禁止事項
- 既存要件にないエンドポイントやフィールドの追加
- ルール不明のまま認証/認可/エラー形式を決める
- 破壊的変更を黙って適用する

## 関連スキル
- 検査: `api-validate-openapi`
- レビュー: `api-review-checklist`
- 生成: `api-generate-openapi`

## 更新日
2026-02-03
